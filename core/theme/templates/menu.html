
<!-- IMPORTANT: link id must be <pageid>-link or <blockid>-link -->


{% macro menu_item(entry) %}
  {% if entry.children|length == 0 %}
    <li class="">
      <a id="{{ entry.uid }}-link"
        {% if entry.point %} 
          href="{{ url_for(entry.point, **entry.kwargs) }}" 
        {% elif entry.url %} 
          href="{{ entry.url }}" 
        {% endif %}>{{ entry.text }}
      </a>
    </li>
  {% else %}      
    {{ menu_dropdown(entry) }}
  {% endif %}
{% endmacro %}

{% macro menu_dropdown(entry) %}    
<li class="dropdown">
  <a href="#">
    <span>{{ entry.text }}</span> 
    <i class="bi bi-chevron-down toggle-dropdown"></i>
  </a>
  <ul>
    {% for child in entry.children|sort(attribute="pos") %}
      {{ menu_item(child) }}
    {% endfor %}
  </ul>
</li>
{% endmacro %}

{% macro menu(entries, started_url='') %}
<ul>
  {% for entry in entries|sort(attribute="pos") %}
    {{ menu_item(entry) }}
  {% endfor %}

  {% if started_url %}
    <li>
      <a class="btn btn-get-started" href="{{ started_url }}">Connexion</a>
    </li>
  {% endif %}
</ul>
{% endmacro %}

